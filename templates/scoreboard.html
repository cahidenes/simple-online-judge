<!DOCTYPE html>
<html lang="en">
<head>
	<title>İşte İsar</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" type="text/css" href="/static/mystyle.css">
 	<style>
		  .checkbox-wrapper-7 .tgl {
			display: none;
		  }
		  .checkbox-wrapper-7 .tgl,
		  .checkbox-wrapper-7 .tgl:after,
		  .checkbox-wrapper-7 .tgl:before,
		  .checkbox-wrapper-7 .tgl *,
		  .checkbox-wrapper-7 .tgl *:after,
		  .checkbox-wrapper-7 .tgl *:before,
		  .checkbox-wrapper-7 .tgl + .tgl-btn {
			box-sizing: border-box;
		  }
		  .checkbox-wrapper-7 .tgl::-moz-selection,
		  .checkbox-wrapper-7 .tgl:after::-moz-selection,
		  .checkbox-wrapper-7 .tgl:before::-moz-selection,
		  .checkbox-wrapper-7 .tgl *::-moz-selection,
		  .checkbox-wrapper-7 .tgl *:after::-moz-selection,
		  .checkbox-wrapper-7 .tgl *:before::-moz-selection,
		  .checkbox-wrapper-7 .tgl + .tgl-btn::-moz-selection,
		  .checkbox-wrapper-7 .tgl::selection,
		  .checkbox-wrapper-7 .tgl:after::selection,
		  .checkbox-wrapper-7 .tgl:before::selection,
		  .checkbox-wrapper-7 .tgl *::selection,
		  .checkbox-wrapper-7 .tgl *:after::selection,
		  .checkbox-wrapper-7 .tgl *:before::selection,
		  .checkbox-wrapper-7 .tgl + .tgl-btn::selection {
			background: none;
		  }
		  .checkbox-wrapper-7 .tgl + .tgl-btn {
			outline: 0;
			display: block;
			width: 4em;
			height: 2em;
			position: relative;
			cursor: pointer;
			-webkit-user-select: none;
			   -moz-user-select: none;
				-ms-user-select: none;
					user-select: none;
		  }
		  .checkbox-wrapper-7 .tgl + .tgl-btn:after,
		  .checkbox-wrapper-7 .tgl + .tgl-btn:before {
			position: relative;
			display: block;
			content: "";
			width: 50%;
			height: 100%;
		  }
		  .checkbox-wrapper-7 .tgl + .tgl-btn:after {
			left: 0;
		  }
		  .checkbox-wrapper-7 .tgl + .tgl-btn:before {
			display: none;
		  }
		  .checkbox-wrapper-7 .tgl:checked + .tgl-btn:after {
			left: 50%;
		  }

		  .checkbox-wrapper-7 .tgl-ios + .tgl-btn {
			background: #fbfbfb;
			border-radius: 2em;
			padding: 2px;
			transition: all 0.4s ease;
			border: 1px solid #e8eae9;
		  }
		  .checkbox-wrapper-7 .tgl-ios + .tgl-btn:after {
			border-radius: 2em;
			background: #fbfbfb;
			transition: left 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275), padding 0.3s ease, margin 0.3s ease;
			box-shadow: 0 0 0 1px rgba(0, 0, 0, 0.1), 0 4px 0 rgba(0, 0, 0, 0.08);
		  }
		  .checkbox-wrapper-7 .tgl-ios + .tgl-btn:hover:after {
			will-change: padding;
		  }
		  .checkbox-wrapper-7 .tgl-ios + .tgl-btn:active {
			box-shadow: inset 0 0 0 2em #e8eae9;
		  }
		  .checkbox-wrapper-7 .tgl-ios + .tgl-btn:active:after {
			padding-right: 0.8em;
		  }
		  .checkbox-wrapper-7 .tgl-ios:checked + .tgl-btn {
			background: #86d993;
		  }
		  .checkbox-wrapper-7 .tgl-ios:checked + .tgl-btn:active {
			box-shadow: none;
		  }
		  .checkbox-wrapper-7 .tgl-ios:checked + .tgl-btn:active:after {
			margin-left: -0.8em;
		  }
	</style>
	
	<style>

        .body {
            font-family: Arial, sans-serif;
			background-color: #F9F7F7;
			overflow-x: auto; /* Enable horizontal scrolling */
			margin: 50px;
        }

        table {
            border-collapse: separate;
			margin-right: 50px;
            border-spacing: 0;
        }

        th, td {
            padding: 8px;
            text-align: center;
			white-space: nowrap;
        }

		.ver {
			writing-mode: vertical-lr; /* Vertical writing mode */
			transform: rotate(180deg);
			text-align: center;
		}

        th {
			background-color: #3F72AF;
			border-right: 3px solid #112D4E;
			border-top: 3px solid #112D4E;
			border-bottom: 3px solid #112D4E;
            color: #fff;
			justify-content: center;
            align-items: center;
			font-size: 20px;
			padding: 20px;
        }

        td {
			background-color: #DBE2EF; /* Neutral color for unsolved questions */
			padding: 20px;
			font-size: 30px;
			border-right: 3px solid #112D4E;
			border-bottom: 3px solid #112D4E;
        }

		.section_side {
			border-left: 3px solid #112D4E;
		}

        .solved {
			background-color: #44CF6C;
        }

        .partially_solved {
			background-color: #CEC929;
        }

        .waiting {
			background-color: #a142d7;
        }

		.empty-column {
			opacity: 0;
			border: none;
        }

		a {
			color: #3F72AF;
			background-color: transparent;
			text-decoration: none;
		}

		/* Freeze the first column */
        th:first-child, td:first-child {
			border-bottom: 3px solid #112D4E;
			border-left: 3px solid #112D4E;
            position: sticky;
            left: 0;
            z-index: 1;
        }

    </style>
</head>
<body>
	<div class="topnav">
		<a href="/">Home</a>
		<a href="/resources">Resources</a>
		<a href="/listresources">Edit Resources</a>
		<a href="/listquestions">Questions</a>
		<a href="/listusers">Users</a>
		<a href="/listsections">Sections</a>
		<a href="/files">Files</a>
		<a class="active" href="/scoreboard">Scoreboard</a>
		<a class="right" href="/login">{{current_user}}</a>
	</div>
	<div class="body">

<table>
    <thead>
        <tr>
            <th>
				<label for=cb2-7>Show All</label>
				<div class="checkbox-wrapper-7" style="float: left;">
					<input class="tgl tgl-ios" id="cb2-7" type="checkbox" onclick="setShowAll()"/>
					<label class="tgl-btn" for="cb2-7">
				</div>
			</th>

<!-- question -->
<th class="{{classes}}">
	<div class="ver" onclick="{{onclick}}" style="cursor: pointer;">{{name}}</div>
</th>
<!-- question end -->

<th class="section_side">
	<div class="ver">Toplam</div>
</th>


</tr>
</thead>

<tbody>

<!-- user -->
	<tr>
		<td><strong>{{name}}</strong></td>
<!-- solved -->
<td class="{{classes}}" onclick="{{onclick}}" style="cursor: {{cursor}};">{{point}}</td>
<!-- solved end -->
	</tr>
<!-- user end -->

</tbody>
</table>
</div>
<script>
	var topnav = document.getElementsByClassName("topnav")[0];
	if (topnav.children[topnav.children.length - 1].innerText != "admin") {
            topnav.children[2].style.display = "none";
            topnav.children[3].style.display = "none";
            topnav.children[4].style.display = "none";
            topnav.children[5].style.display = "none";
            topnav.children[6].style.display = "none";
	}

	function update() {
		fetch("/scoreboard", {
			method: "GET",
		}).then(response => {
			return response.text();
		}).then(text => {
			if (document.getElementById("cb2-7").checked) {
				document.body.innerHTML = text;
				document.getElementById("cb2-7").checked = true;
			} else {
				document.body.innerHTML = text;
				document.getElementById("cb2-7").checked = false;
			}
			setShowAll()
		})
		setTimeout(update, 5000); 
	}
	if ("{{current_user}}" == "admin") {
		update();
	}

	function removePreviousSections() {
		var tags = ["thead", "tbody"];
		tags.forEach(tag => {
			Array.from(document.getElementsByTagName(tag)[0].children).forEach(row => {
				var cells = Array.from(row.children)
				cells.pop()
				var seen = false;
				cells.forEach(cell => {
					if (cell.classList.contains("section_side")) {
						seen = true;
					}
					if (seen) {
						cell.style.display = "none";
					}
				});
			});
		})
	}

	function bringPreviousSections() {
		Array.from(document.getElementsByTagName("td")).forEach(element => {
			if (element.style.display == "none") {
				element.style.removeProperty("display")
			}
		});
		Array.from(document.getElementsByTagName("th")).forEach(element => {
			if (element.style.display == "none") {
				element.style.removeProperty("display")
			}
		});
	}

	function setShowAll() {
		if (document.getElementById("cb2-7").checked) {
			bringPreviousSections()
		} else {
			removePreviousSections()
		}
	}
</script>
</body>

</html>

